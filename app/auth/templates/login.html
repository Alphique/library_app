{% extends "base.html" %}

{% block content %}
<div class="login-page-wrapper">
    <div class="login-bg-image"></div>
    <div class="login-overlay"></div>
    
    <div class="container d-flex align-items-center justify-content-center min-vh-100">
        <div class="login-card-premium">
            
            <div class="login-header-elite">
                <div class="brand-badge">
                    <img src="{{ url_for('static', filename='photos/logo3.png') }}" alt="CUZ" class="login-logo-img">
                </div>
                <h2>Intellectual Hub</h2>
                <p>Digital Library Access</p>
            </div>
            
            <div class="login-body-elite">
                <div class="user-selector-wrapper">
                    <div class="selector-pills">
                        <input type="radio" name="user_type" id="student" value="student" checked>
                        <label for="student" class="pill-item">Student</label>
                        
                        <input type="radio" name="user_type" id="admin" value="admin">
                        <label for="admin" class="pill-item">Staff</label>
                    </div>
                </div>

                <form method="POST" action="" class="mt-4">
                    {{ form.hidden_tag() }}
                    
                    <div class="input-block">
                        <label class="input-label">Identity Credential</label>
                        <div class="input-field-group">
                            <span class="field-icon"><i class="fas fa-user-circle"></i></span>
                            {{ form.login_identifier(class="elite-input", placeholder="ID or Email", id="login_identifier") }}
                        </div>
                    </div>

                    <div class="input-block mt-3">
                        <label class="input-label">Security Key</label>
                        <div class="input-field-group">
                            <span class="field-icon"><i class="fas fa-shield-alt"></i></span>
                            {{ form.password(class="elite-input", placeholder="••••••••") }}
                        </div>
                    </div>

                    <div class="d-flex justify-content-between align-items-center mt-3 mb-4">
                        <div class="form-check custom-check">
                            {{ form.remember(class="form-check-input") }}
                            <label class="form-check-label text-white-50 small">Keep Active</label>
                        </div>
                        <a href="#" class="gold-link small">Forgot Password?</a>
                    </div>

                    <button type="submit" class="btn-elite-login">
                        Login to Archive
                    </button>
                </form>

                <div class="demo-boundary mt-4">
                    <span>Quick Access (Demo)</span>
                </div>
                
                <div class="row g-2 mt-2">
                    <div class="col-6">
                        <button type="button" class="btn-demo-elite" data-type="student" data-identifier="CUN2025100801" data-password="Testing1@">Student</button>
                    </div>
                    <div class="col-6">
                        <button type="button" class="btn-demo-elite" data-type="admin" data-identifier="admin" data-password="admin123">Staff</button>
                    </div>
                </div>
            </div>

            <div class="login-footer-elite">
                New to the Hub? <a href="{{ url_for('auth.register') }}" class="gold-link">Register Here</a>
            </div>
        </div>
    </div>
</div>

<style>
    :root {
        --accent-gold: #d4af37;
        --deep-sapphire: #000814;
    }

    .login-page-wrapper {
        position: relative;
        min-height: 100vh;
        width: 100%;
        overflow: hidden;
    }

    /* Full Background Image */
    .login-bg-image {
        position: fixed;
        top: 0; left: 0;
        width: 100%; height: 100%;
        background: url("{{ url_for('static', filename='photos/cuzlib.png') }}") no-repeat center center;
        background-size: cover;
        z-index: -2;
    }

    /* Dark Overlay for Readability */
    .login-overlay {
        position: fixed;
        top: 0; left: 0;
        width: 100%; height: 100%;
        background: linear-gradient(to bottom, rgba(0, 8, 20, 0.7), rgba(0, 8, 20, 0.9));
        z-index: -1;
    }

    .login-card-premium {
        width: 92%;
        max-width: 400px;
        background: rgba(255, 255, 255, 0.05);
        backdrop-filter: blur(25px) saturate(180%);
        -webkit-backdrop-filter: blur(25px) saturate(180%);
        border: 1px solid rgba(255, 255, 255, 0.1);
        border-radius: 28px;
        box-shadow: 0 25px 50px rgba(0,0,0,0.5);
    }

    .login-header-elite {
        text-align: center;
        padding: 40px 20px 10px;
    }

    .brand-badge {
        width: 65px; height: 65px;
        background: #fff;
        border-radius: 18px;
        display: flex; align-items: center; justify-content: center;
        margin: 0 auto 15px;
        box-shadow: 0 8px 20px rgba(0,0,0,0.3);
    }

    .login-logo-img { width: 40px; }

    .login-header-elite h2 {
        font-family: 'Playfair Display', serif;
        color: #fff; font-size: 1.6rem; font-weight: 700;
        margin-bottom: 5px;
    }

    .login-header-elite p {
        color: var(--accent-gold);
        text-transform: uppercase; letter-spacing: 2.5px;
        font-size: 0.6rem; font-weight: 800;
    }

    .login-body-elite { padding: 10px 30px 30px; }

    /* Modern Pill Toggle */
    .user-selector-wrapper {
        background: rgba(0,0,0,0.4);
        border-radius: 14px; padding: 4px;
        border: 1px solid rgba(255,255,255,0.05);
    }

    .selector-pills { display: flex; }
    .selector-pills input { display: none; }
    
    .pill-item {
        flex: 1; text-align: center; padding: 12px;
        font-size: 0.75rem; font-weight: 700; color: rgba(255,255,255,0.4);
        cursor: pointer; transition: 0.3s;
        border-radius: 10px; text-transform: uppercase;
    }

    #student:checked ~ label[for="student"],
    #admin:checked ~ label[for="admin"] {
        background: var(--accent-gold); color: #000;
    }

    /* Inputs */
    .input-label {
        font-size: 0.65rem; color: var(--accent-gold);
        text-transform: uppercase; font-weight: 800;
        margin-bottom: 8px; display: block;
    }

    .input-field-group { position: relative; }

    .field-icon {
        position: absolute; left: 15px; top: 50%; transform: translateY(-50%);
        color: rgba(255,255,255,0.3);
    }

    .elite-input {
        width: 100%; height: 54px;
        background: rgba(0,0,0,0.2);
        border: 1px solid rgba(255,255,255,0.1);
        border-radius: 14px;
        padding-left: 45px; color: #fff; font-size: 0.95rem;
    }

    .elite-input:focus {
        outline: none; border-color: var(--accent-gold);
        background: rgba(0,0,0,0.4);
    }

    .btn-elite-login {
        width: 100%; height: 56px;
        background: #fff; color: #000;
        border: none; border-radius: 14px;
        font-weight: 800; text-transform: uppercase; letter-spacing: 1px;
        transition: 0.3s; margin-top: 10px;
    }

    .btn-elite-login:hover { transform: translateY(-2px); box-shadow: 0 10px 20px rgba(0,0,0,0.4); }

    .gold-link { color: var(--accent-gold); text-decoration: none; font-weight: 700; }

    .demo-boundary {
        text-align: center; border-bottom: 1px solid rgba(255,255,255,0.1);
        line-height: 0.1em; margin: 25px 0 15px;
    }
    .demo-boundary span { 
        background: rgba(20, 20, 20, 0.8); padding: 0 10px; 
        font-size: 0.6rem; color: rgba(255,255,255,0.4);
    }

    .btn-demo-elite {
        width: 100%; padding: 10px; font-size: 0.7rem;
        background: rgba(255,255,255,0.05); border: 1px solid rgba(255,255,255,0.1);
        color: #fff; border-radius: 10px; font-weight: 700; text-transform: uppercase;
    }

    .login-footer-elite {
        padding: 20px; text-align: center;
        background: rgba(0,0,0,0.3);
        font-size: 0.8rem; color: rgba(255,255,255,0.5);
        border-bottom-left-radius: 28px; border-bottom-right-radius: 28px;
    }

    .custom-check .form-check-input {
        background-color: transparent; border: 1px solid rgba(255,255,255,0.2);
    }
</style>

<script>
    document.addEventListener('DOMContentLoaded', function() {
        const studentRadio = document.getElementById('student');
        const adminRadio = document.getElementById('admin');
        const idInput = document.getElementById('login_identifier');
        const demoBtns = document.querySelectorAll('.btn-demo-elite');

        const updatePlaceholder = () => {
            idInput.placeholder = studentRadio.checked ? "Student ID or Email" : "Staff Username";
        };

        studentRadio.addEventListener('change', updatePlaceholder);
        adminRadio.addEventListener('change', updatePlaceholder);

        demoBtns.forEach(btn => {
            btn.addEventListener('click', function() {
                const type = this.getAttribute('data-type');
                if(type === 'student') studentRadio.checked = true;
                else adminRadio.checked = true;
                
                updatePlaceholder();
                idInput.value = this.getAttribute('data-identifier');
                document.querySelector('input[type="password"]').value = this.getAttribute('data-password');
            });
        });
    });
</script>
{% endblock %}